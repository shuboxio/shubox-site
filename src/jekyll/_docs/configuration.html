---
title: JavaScript API
order: 3
---

<h1 class="mt4 pt3" id="javascript-api">JavaScript Api</h1>

<h2>Methods</h2>

<h3 id="option-sending">sending:</h3>
<p>
  The <code>sending</code> callback is called just before each file is sent.
  It receives <code>file</code>[<a href="#type-file">1</a>], <code>xhr</code>,
  and <code>formData</code> objects. This allows you to modify any or all of
  these object before they go in flight to your endpoint (to add headers, etc).
</p>
<pre><code>sending: function(file, xhr, formData) {}</code></pre>

<h3 id="option-success">success:</h3>
<p>
  Assign a function to the success key that accepts a
  <code>file</code> parameter which will be run after files are successfully
  uploaded. More information about the <code>File</code> type passed into
  this function <a href="#type-file">can be found below</a>.
</p>
<pre><code>success: function(file) {}</code></pre>

<h3 class="mt4" id="option-error">error:</h3>
<p>
  Assign a function to the error key which accepts a
  <a href="#type-file">file object</a> and an error string and it will
  be run when errors are incurred with a file upload.
</p>
<pre><code>error: function(file, message) {}</code></pre>

<h3 class="mt4" id="option-queue-complete">queuecomplete:</h3>
<p>
  The queuecomplete callback will be called when all files are finished
  uploading.
</p>
<pre><code>queuecomplete: function() {}</code></pre>

<h2 class="mt4 pt3">Parameters</h2>

<h3 id="option-s3-url-template">s3urlTemplate:</h3>
<p>
  When uploading to a form element, the element's value will be
  changed to the URL of the uploaded file, which is, according to the
  default value of this option, a handlebars-like representation of
  the S3 URL - <code>'{{s3Url}}'</code>.
</p>
<p>
  This can be changed to any string, and if it has the
  <code>'{{s3Url}}'</code> string anywhere within it, it will be
  interpolated with the final uploaded file's address. Example, to
  instead insert markdown's image pseudo code you would change this to
  <code>'![alt text]({{s3Url}})'</code>.
</p>
<pre><code>s3urlTemplate: '{{s3Url}}'</code></pre>

<h3 class="mt4" id="option-text-behavior">textBehavior:</h3>
<p>
  When uploading through a form element (<code>&lt;input&gt;</code>,
  <code>&lt;textarea&gt;</code>, etc) the behavior, by default, will be
  to <code>'replace'</code> the contents of the form element value with
  the URL to the newly uploaded file.
</p>
<p>
  Changing the value to <code>'append'</code> will append the resulting
  value from the newly uploaded file to the form element.
</p>
<pre><code>textBehavior: 'replace' // default value</code></pre>

<h3 class="mt4" id="option-clickable">clickable:</h3>
<p>
  Any element initialized with Shubox will, by default, trigger the
  file dialog when clicked.
</p>
<p>
  Setting this to <code>false</code> will turn it off, but will still
  allow dragging and dropping into the element.
</p>
<p>
  Changing the value to a <strong>valid</strong> CSS selector pointing
  to <strong>another</strong> element will allow that other element to
  trigger the file dialog instead of the main target element Shubox is
  initialized with. For a more comprehensive example see
  <a href="/blog/2016/08/05/how_thredded_uses_shubox/">this blog post</a>
  for a common use case where this is utilized.
</p>
<pre><code>clickable: true // default value</code></pre>

<h3 class="mt4" id="option-preview-template">previewTemplate:</h3>
<p>
  Because much of the JS under the hood is handled by the excellent
  <a href="https://www.dropzonejs.com/">dropzone.js</a> javascript library
  Shubox makes use of its conventions where it makes sense. The
  <code>previewTemplate</code> option takes a string containing an html
  template which Dropzone will use to render a preview image for each
  dropped image. For more information on how to theme the elements
  generated by the default string
  <a href="https://www.dropzonejs.com/#theming" target="_blank">you may
  visit the DropzoneJS website</a> and get an idea for what you can do
  by "theming" the resulting UI.
</p>
<pre class="javascript"><code>var myTemplate = '&lt;div class=\&quot;dz-preview dz-file-preview\&quot;&gt;' +
  '  &lt;div class=\&quot;dz-details\&quot;&gt;' +
  '    &lt;div class=\&quot;dz-filename\&quot;&gt;&lt;span data-dz-name&gt;&lt;/span&gt;&lt;/div&gt;' +
  '    &lt;div class=\&quot;dz-size\&quot; data-dz-size&gt;&lt;/div&gt;' +
  '    &lt;img data-dz-thumbnail /&gt;' +
  '  &lt;/div&gt;' +
  '  &lt;div class=\&quot;dz-progress\&quot;&gt;&lt;span class=\&quot;dz-upload\&quot; data-dz-uploadprogress&gt;&lt;/span&gt;&lt;/div&gt;' +
  '  &lt;div class=\&quot;dz-success-mark\&quot;&gt;&lt;span&gt;ðŸ˜„&lt;/span&gt;&lt;/div&gt;' +
  '  &lt;div class=\&quot;dz-error-mark\&quot;&gt;&lt;span&gt;ðŸ˜©&lt;/span&gt;&lt;/div&gt;' +
  '  &lt;div class=\&quot;dz-error-message\&quot;&gt;&lt;span data-dz-errormessage&gt;&lt;/span&gt;&lt;/div&gt;' +
  '&lt;/div&gt;'

new Shubox('#my-selector', {
  previewTemplate: myTemplate
});
</code></pre>

<h3 class="mt4" id="option-previews-container">previewsContainer</h3>
<p>
  Defines <em>where</em> to display the file previews. If <code>null</code> the
  target Shubox element itself is used. Can be a plain HTMLElement or a CSS
  selector. A demo that uses this <a href="https://codepen.io/shubox/pen/qRdddM" target="_blank">can be found on CodePen here</a>.
</p>
<pre class="javascript"><code>previewsContainer: null // the default
previewsContainer: '#selector'
previewsContainer: document.querySelector('#dom-element')
</code></pre>

<h3 class="mt4" id="option-extra-params">extraParams:</h3>
<p>
  Shubox provides a mechanism with which to post custom data via an AJAX
  webhook to any address of your own choosing whenever files are
  uploaded. This will allow you to share any information available during
  your users' session. The information within the `extraParams` hash will
  be sent to your webhook endpoint along with the data from the uploaded
  file.
</p>
<p>
  As an example, you may want to send data about the uploaded
  file(s) <em><strong>with</strong></em> a user's ID or email. It's not uncommon
  to want to know <em><strong>who</strong></em> is uploading a particular file.
</p>
<pre class="javascript"><code>extraParams: { // defaults to empty object
  userID: 123,
  userEmail: 'team@shubox.io'
}</code></pre>

<h3 class="mt4" id="option-accepted-files">acceptedFiles:</h3>
<p>
  If you only want <em>certain</em> file types allowed to be uploaded, you may
  provide a list of mime types or extensions.  The contents of the option may
  include a comma separated list of mime types or file extensions.  Eg.:
  <code></code>
</p>
<pre class="javascript"><code>acceptedFiles: "image/*,application/pdf,.psd"</code></pre>


